<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Test ascensor</title>
		<meta name="viewport" content="user-scalable=0,width=device-width,initial-scale=1,maximum-scale=1">
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" type="text/css" href="css/marvelcolors-main.css" />
		<style>
		.floor .text {color: white;font-weight: 500;text-align: center;position: absolute;top: 50%;left: 50%;-moz-transform: translateX(-50%) translateY(-50%);-webkit-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%);}
		.floor-1{background: #fff;}.floor-2{background: #71B5E5;}.floor-3{background: #fff;}
		.floor-4{background: #EB5D45;}
		.floor-5{background: #4AAEB6;}
		.floor-6{background: #E7DFBF;}
		.floor-7{background: #CA9E67;}
		.floor-8{background: #4fade3;}
		ul {list-style: none;}
		#main li a {padding: 3px 6px; display: inline-block;background: #eee;border-radius:3px;margin-bottom:2px;color: #777;}
		#main li a:hover{cursor:pointer; background:#fefefe;}
		#main .links-to-floor{position: absolute;top: 20px;left: 20px;}
		.direction-links li a{border-radius: 0;}
		#main li.selected a{color: white;background:#4fade3;}
		#main li.selected a:hover{color: white;background:#4fade3;}
		</style>
	</head>
	<body>

		<div id="ascensorBuilding">
			<!--HOME-->
			<div class="floor floor-1">
				<div class="direction-links">
					<div id="formeleft" class="direction left" data-direction="left"><p id="cbs-sub" class="subtitle">Discover the most used colors on covers by series</p></div>
					<div id="formeright" class="direction right" data-direction="right"><p id="cbsea-sub" class="subtitle">Discover the most used colors on covers by seasons</p></div>
					<div id="formebottom" class="direction down" data-direction="down"><p id="cbh-sub" class="subtitle">Discover the most used colors on covers</p></div>
					<div id="left" class="icone_dir text direction left" data-direction="left"></div>
					<div id="right" class="icone_dir text direction right" data-direction="right"></div>
					<div id="bas" class="icone_dir text direction down" data-direction="down"></div>
				</div>
				<span class="text">
			        <h1 id="derriere" >MARVEL<br />COLORS</h1>
			        <h1 id="devant">MARVEL<br />COLORS</h1>
				</span>
				<h1 id="cbs" class="text title">COLORS<br />BY SERIES</h1>
				<h1 id="cbsea" class="text title">COLORS<br />BY SEASONS</h1>
				<h1 id="cbh" class="text title">COLORS<br />BY HUES</h1>
			</div>
			<!--COLORS BY SERIES-->
			<div class="floor floor-2">
				<span class="text">Colors by series</span>
				<ul class="links-to-floor">
					<li id="right" class="icone_dir text"><a></a></li>
				</ul>
			</div>
			<!--COLORS BY SEASONS-->
			<div class="floor floor-3">
				<ul class="links-to-floor">
					<li id="left" class="icone_dir text"><a></a></li>
				</ul>
				<div id="output1">
					<span classe="infoseasons"></span>
				</div>
				<div id="output2">
					<span classe="infoseasons"></span>
				</div>
				<div id="output3">
					<span classe="infoseasons"></span>					
				</div>
				<div id="output4">
					<span classe="infoseasons"></span>					
				</div>
			</div>
			<!--MOST USED COLORS-->
			<div class="floor floor-4">
				<span class="text">Most used color 1</span>
				<ul class="links-to-floor">
					<li id="top" class="icone_dir text"><a></a></li>
				</ul>
				<ul class="prev-next-links">
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-5">
				<span class="text">Most used color 2</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-6">
				<span class="text">Most used color 3</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-7">
				<span class="text">Most used color 4</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
				</ul>				
				<ul class="links-to-floor">
					<li id="up" class="icone_dir text"><a></a></li>
				</ul>
			</div>
		</div>
		<!--MENU PAR DEFAUT *pas intÃ©ressant pour l'instant*-->
		<!--<nav>
			<ul id="main" class="links-to-floor">
				<li id="first"><a>Home</a></li>
				<li id="second"><a>Series</a></li>
				<li id="third"><a>Seasons</a></li>
				<li id="fourth"><a>Main Color 1</a></li>
				<li id="fifth"><a>Main Color 2</a></li>
				<li id="six"><a>Main Color 3</a></li>
				<li id="seventh"><a>Main Color 4</a></li>
			</ul>
		</nav>-->
		<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
		<!-- NAVIGATION-->
		<script src="dist/jquery.ascensor.js"></script>
		<script>
			var ascensor = $('#ascensorBuilding').ascensor({ascensorFloorName:["Home", "Series", "Seasons" , "maincolor1" , "maincolor2", "maincolor3", "maincolor4"], direction: [[0,1],[0,0],[0,2],[1,1],[2,1],[3,1],[4,1],[5,1]]});
			var ascensorInstance = $('#ascensorBuilding').data('ascensor');
				
			$(".links-to-floor li").click(function(event, index) {
				ascensorInstance.scrollToFloor($(this).index());
			});

			$("#main .links-to-floor li:eq("+ ascensor.data("current-floor") +")").addClass("selected");

			ascensor.on("scrollStart", function(event, floor){
				$("#main .links-to-floor li").removeClass("selected");
				$("#main .links-to-floor li:eq("+floor.to+")").addClass("selected");
			});

			$(".prev").click(function() {
				ascensorInstance.prev();
			});
				
			$(".next").click(function() {
				ascensorInstance.next();
			});
				
			$(".direction").click(function() {
				ascensorInstance.scrollToDirection($(this).data("direction"));
			});	
		</script>
		<!--SHOW MENU ON HOVERS-->
		<script type="text/javascript">
			$(document).ready(function() {
			    $("#formeleft").hover(function () {
			        $("#cbs, #cbs-sub").toggle();
			    })
			})

			$(document).ready(function() {
			    $("#formeright").hover(function () {
			        $("#cbsea, #cbsea-sub").toggle();
			    })
			})

			$(document).ready(function() {
			    $("#formebottom").hover(function () {
			        $("#cbh, #cbh-sub").toggle();
			    })
			})						
		</script>
		<!--JSON BY SEASONS-->
		<script>
			var sliceColor = [ ];
			$(document).ready(function() {

				var url="marvelcolors-data-json.txt";
			    var json = new Array();

			    $.getJSON(url,function(data){
					json = data;
			    }).done(function(){  

					sortJsonField();
			    });
			        function sortJsonField(field){
			            function sortJson(a,b){
			                if(field == "sat"){ 
								return a.sat > b.sat ? 1 : -1;
							}
							else if(field == "bri"){ 
								return a.bri > b.bri ? 1 : -1;
							}
							else { 
								return a.hue> b.hue ? 1 : -1;
							}
			            }
			            json.data.sort(sortJson);
			            showJSON();
			        };
			        //shower
			        function showJSON(){
			            $('#output1,#output2,#output3,#output4').empty();
			            $.each(json.data,function(i,row){ 
			                var classe = "";
			                if(row.seasons == "spring") classe = "spring";
			                else if(row.seasons == "summer") classe = "summer";
			                else if(row.seasons == "autumn") classe = "autumn";
			                else if(row.seasons == "winter") classe = "winter";

			                sliceColor[i] = '<li style="background-color:hsl(';
			                sliceColor[i] += row.hue + ',' + row.bri + '%,' + row.sat + '%);" class="slice"></li>';

			                if(classe == "spring") {
			                    $('#output1').append(sliceColor[i]);
			                    $("#output1 .slice").addClass("spring");
			                    $('.spring').css('height', 100/$('.spring').length + "%");
			                }
			                else if(classe == "summer") {
			                    $('#output2').append(sliceColor[i]);
			                     $("#output2 .slice").addClass("summer");
			                    $('.summer').css('height', 100/$('.summer').length + '%');
			                }
			                else if(classe == "autumn") {
			                    $('#output3').append(sliceColor[i]); 
			                    $("#output3 .slice").addClass("autumn");
			                    $('.autumn').css('height', 100/$('.autumn').length + '%');
			                }
			                else if(classe == "winter"){
			                    $('#output4').append(sliceColor[i]); 
			                    $("#output4 .slice").addClass("winter");
			                    $('.winter').css('height', 100/$('.winter').length + '%');
			                }

			                console.log('<h1>'+ classe + '</h1><p>' + ($('.spring').length) + ' album covers</p>');
			            });
			        };
			        showJSON(); 
			});
</script>

	</body>
</html>