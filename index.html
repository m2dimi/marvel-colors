<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Marvel Colors</title>
		<!-- meta -->
		<meta name="description" content="Marvel Colors: visualize 15 years of Marvel covers through their colors">
		<meta name="author" content="Claire Blumenfeld, Ingrid Lenoir, Claire Mauchin">
		<meta name="viewport" content="user-scalable=0,width=device-width,initial-scale=1,maximum-scale=1">
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" type="text/css" href="css/marvelcolors-main.css" />
		<link rel="stylesheet" type="text/css" href="css/magnific-popup.css" />
		<style>
		.floor .text {color: white;font-weight: 500;text-align: center;position: absolute;top: 50%;left: 50%;-moz-transform: translateX(-50%) translateY(-50%);-webkit-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%);}
		.floor-1{background: #fff;}.floor-2{background: #fff;}.floor-3{background: #fff;}
		/*.floor-4{background: #EB5D45;}*/
		.floor-5{background: #4AAEB6;}
		.floor-6{background: #E7DFBF;}
		.floor-7{background: #CA9E67;}
		.floor-8{background: #4fade3;}
		ul {list-style: none;}
		#main li a {padding: 3px 6px; display: inline-block;background: #eee;border-radius:3px;margin-bottom:2px;color: #777;}
		#main li a:hover{cursor:pointer; background:#fefefe;}
		#main .links-to-floor{position: absolute;top: 20px;left: 20px;}
		.direction-links li a{border-radius: 0;}
		#main li.selected a{color: white;background:#4fade3;}
		#main li.selected a:hover{color: white;background:#4fade3;}
		</style>
	</head>
	<body>

		<div id="ascensorBuilding">
			<!--HOME-->
			<div class="floor floor-1">
				<div class="direction-links">
					<div id="formeleft" class="direction left" data-direction="left"><p id="cbs-sub" class="subtitle">Discover the most used colors on covers by series</p></div>
					<div id="formeright" class="direction right" data-direction="right"><p id="cbsea-sub" class="subtitle">Discover the most used colors on covers by seasons</p></div>
					<div id="formebottom" class="direction down" data-direction="down"><p id="cbh-sub" class="subtitle">Discover the most used colors on covers</p></div>
					<div id="left" class="icone_dir text direction left" data-direction="left"></div>
					<div id="right" class="icone_dir text direction right" data-direction="right"></div>
					<div id="bas" class="icone_dir text direction down" data-direction="down"></div>
				</div>
				<span class="text">
			        <h1 id="derriere" >MARVEL<br />COLORS</h1>
			        <h1 id="devant">MARVEL<br />COLORS</h1>
				</span>
				<span class="text catchphrase">
			        <h2>Visualize 15 years of Marvel covers through their colors</h2>
				</span>
			    <span id="mother_modal">
			    	<h2><a class="popup-modal help" href="#test-modal1">Help</a><a class="popup-modal about" href="#test-modal2">About</a></h2>
			    </span>
			    <div class="cover"></div>
				<h1 id="cbs" class="text title">COLORS<br />BY SERIES</h1>
				<h1 id="cbsea" class="text title">COLORS<br />BY SEASONS</h1>
				<h1 id="cbh" class="text title">COLORS<br />BY HUES</h1>
				<!-- TEST MODAL-->
				<div id="test-modal1" class="white-popup-block mfp-hide">
					
						<div class="header">
							<h2>Help</h2>
						</div>
						<div class="copy">
							<p>Click on the arrows or use your keyboard arrow keys to navigate the website.</p>
							<img src="images/gauche_blanc.png"/>
							<img src="images/droite_blanc.png"/>
							<span id="or">or</span>
							<img src="images/clavier_3.png"/>
						</div>
						<p><a class="popup-modal-dismiss" href="#">Dismiss</a></p>
					
				</div>
				<div id="test-modal2" class="white-popup-block mfp-hide">
					
						<div class="header">
							<h2>About</h2>
						</div>
							<div class="copy">
							<h2>THE PROJECT</h2>
				            <p>Marvel Colors is a data-visualization project divided into three sections in which the visitor playfully explores data about colors of Marvel comics covers.</p>
				            <p>This project was carried out by three Marvel comics fans for the Information Design course in the final year of their master’s degree in Interface Design at Paris XIII university.</p>
				            <h2>DATA</h2>
				            <p>Marvel Colors focuses on a selection of Marvel comics.</p>
				            <p>Release dates : 2000 to 2015<br />Series : Black Panther, Captain America, Captain Marvel, Civil Wars, Iron Man, Thor, Ant-Man, Avengers, Hulk, Doctor Strange, Guardians of the Galaxy, Inhumans</p>
				            <h2>DATA SOURCE</h2>
				            <p><a href="http://marvel.com/comics/series">http://marvel.com/comics/series</a><br /><a href="http://marvel.wikia.com/Contents">http://marvel.wikia.com/Contents</a><br /><a href="http://www.comicvine.com">http://www.comicvine.com</a></p>
				            <h2>THE TEAM</h2>
				            <p>Claire Blumenfeld | Web design<br />Ingrid Lenoir | Data Processing<br />Claire Mauchin | Development</p>
				            <h2>MANY THANKS TO</h2>
				            <p>Mr Daniele Guido, Mr Everardo Reyes, Mr Guy Bilisko and our friends Yannick Houssin &amp; Lucas Turuani for their help and their patience.</p>
				            <p>We couldn't have finished this without you.</p>
				            <h2>SHARE THE MARVEL LOVE</h2>
				            <a href="https://www.facebook.com/sharer/sharer.php?u=http://m2dimi.github.io/marvel-colors" target="_blank" class="share facebook">Facebook</a>
				            <a href="http://twitter.com/intent/tweet/?url=http://m2dimi.github.io/marvel-colors&text=Marvel%20Colors:%20visualize%2015%20years%20of%20Marvel%20covers%20through%20their%20colors" target="_blank" class="share twitter">Twitter</a>
						</div>
						<p><a class="popup-modal-dismiss" href="#">Dismiss</a></p>
					
				</div>
			</div>
			<!--COLORS BY SERIES-->
			<div class="floor floor-2">
				<ul class="links-to-floor">
					<li id="right" class="icone_dir text"><a></a></li>
				</ul>
				<div id="colorsbyseries" ></div>
			</div>
			<!--COLORS BY SEASONS-->
			<div class="floor floor-3">
				<ul class="links-to-floor">
					<li id="left" class="icone_dir text"><a></a></li>
				</ul>
				<div id="output1">
				</div>
				<div id="output2">
				</div>
				<div id="output3">				
				</div>
				<div id="output4">				
				</div>
				<div id="infos_seasons">
					<div class="info_season"><h2>SPRING</h2><h3>1 line = 1 cover <br /> total = 112 comics</h3></div>
					<div class="info_season"><h2>SUMMER</h2><h3>1 line = 1 cover <br /> total = 160 comics</h3></div>
					<div class="info_season"><h2>AUTUMN</h2><h3>1 line = 1 cover <br /> total = 149 comics</h3></div>
					<div class="info_season"><h2>WINTER</h2><h3>1 line = 1 cover <br /> total = 188 comics</h3></div>
				</div>
			</div>
			<!--MOST USED COLORS-->
			<div class="floor floor-4">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<div id="test"></div>
				<ul class="links-to-floor">
					<li id="top" class="icone_dir text"><a></a></li>
				</ul>
				<ul class="prev-next-links">
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-5">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-6">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-7">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-8">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-9">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
					<li id="bas" class="icone_dir text next" ><a></a></li>
				</ul>
			</div>
			<div class="floor floor-10">
				<span class="text">
					<h2></h2>
					<h3></h3>
				</span>
				<ul class="prev-next-links">
					<li id="top" class="icone_dir text prev"><a></a></li>
				</ul>				
				<ul class="links-to-floor">
					<li id="up" class="icone_dir text"><a></a></li>
				</ul>
			</div>
		</div>
		<!--MENU PAR DEFAUT *pas intéressant pour l'instant*-->
		<!--<nav>
			<ul id="main" class="links-to-floor">
				<li id="first"><a>Home</a></li>
				<li id="second"><a>Series</a></li>
				<li id="third"><a>Seasons</a></li>
				<li id="fourth"><a>Main Color 1</a></li>
				<li id="fifth"><a>Main Color 2</a></li>
				<li id="six"><a>Main Color 3</a></li>
				<li id="seventh"><a>Main Color 4</a></li>
			</ul>
		</nav>-->
		<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <!-- MODALS -->
  		<script src="js/jquery.magnific-popup.js"></script>
        <script>
   			
			    $(function () {
					$('.popup-modal').magnificPopup({
						type: 'inline',
						preloader: false,
						focus: '#username',
						modal: true
					});
					$(document).on('click', '.popup-modal-dismiss', function (e) {
						e.preventDefault();
						$.magnificPopup.close();
					});
				});
    		
 	    </script>
		<!-- NAVIGATION-->
		<script src="dist/jquery.ascensor.js"></script>
		<script>
			var ascensor = $('#ascensorBuilding').ascensor({ascensorFloorName:["Home", "Series", "Seasons" , "maincolor1" , "maincolor2", "maincolor3", "maincolor4", "maincolor5", "maincolor6", "maincolor7", "maincolor8", "maincolor9", "maincolor10"], direction: [[0,1],[0,0],[0,2],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1],[9,1],[10,1],]});
			var ascensorInstance = $('#ascensorBuilding').data('ascensor');
				
			$(".links-to-floor li").click(function(event, index) {
				ascensorInstance.scrollToFloor($(this).index());
			});

			$("#main .links-to-floor li:eq("+ ascensor.data("current-floor") +")").addClass("selected");

			ascensor.on("scrollStart", function(event, floor){
				$("#main .links-to-floor li").removeClass("selected");
				$("#main .links-to-floor li:eq("+floor.to+")").addClass("selected");
			});

			$(".prev").click(function() {
				ascensorInstance.prev();
			});
				
			$(".next").click(function() {
				ascensorInstance.next();
			});
				
			$(".direction").click(function() {
				ascensorInstance.scrollToDirection($(this).data("direction"));
			});	
		</script>
		<!--SHOW MENU ON HOVERS-->
		<script type="text/javascript">
			$(document).ready(function() {
			    $("#formeleft").hover(function () {
			        $("#cbs, #cbs-sub, .cover").toggle();
			    });
			    $("#formeright").hover(function () {
			        $("#cbsea, #cbsea-sub, .cover").toggle();
			    });
			    $("#formebottom").hover(function () {
			        $("#cbh, #cbh-sub, .cover").toggle();
			    });
			})						
		</script>
		<!--JSON BY SERIES-->
		<script>
		var url = "colors-by-series.json";

		$.getJSON(url, function (bidule) {

			for (var i in bidule.rows) {
		            // Set the variables from the results array
			    var code = bidule.rows[i].Code;
			    var thisseries = bidule.rows[i].Series;

			    var color1 = bidule.rows[i].Couleur1;
			    var color2 = bidule.rows[i].Couleur2;
			    var color3 = bidule.rows[i].Couleur3;
			    var color4 = bidule.rows[i].Couleur4;
			    var color5 = bidule.rows[i].Couleur5;
			    var color6 = bidule.rows[i].Couleur6;
			    var color7 = bidule.rows[i].Couleur7;
			    var color8 = bidule.rows[i].Couleur8;
			    var color9 = bidule.rows[i].Couleur9;

			    var fond = bidule.rows[i].front_bg;

			    //create the card
				$('#colorsbyseries').append('<div class="flip-container"><div class="flipper"><div id="'+code+'" class="front"><h1>'+ thisseries + '</h1></div><div class="back"><div id="'+code+'_color1" class="nuancier"><span>'+color1+'</span></div><div id="'+code+'_color2" class="nuancier"><span>'+color2+'</span></div><div id="'+code+'_color3" class="nuancier"><span>'+color3+'</span></div><div id="'+code+'_color4" class="nuancier"><span>'+color4+'</span></div><div id="'+code+'_color5" class="nuancier"><span>'+color5+'</span></div><div id="'+code+'_color6" class="nuancier"><span>'+color6+'</span></div><div id="'+code+'_color7" class="nuancier"><span>'+color7+'</span></div><div id="'+code+'_color8" class="nuancier"><span>'+color8+'</span></div><div id="'+code+'_color9" class="nuancier"><span>'+color9+'</span></div></div></div></div>');
				//style the dynamic par of the card
			    $('#' + code).css('background', 'url('+ fond +') repeat-y top left');
			    $('.front').css('background-size', '100% 100%');
			  
			    $('#' + code + '_color1').css('background-color', color1);
			    $('#' + code + '_color2').css('background-color', color2);
			    $('#' + code + '_color3').css('background-color', color3);
			    $('#' + code + '_color4').css('background-color', color4);
			    $('#' + code + '_color5').css('background-color', color5);
			    $('#' + code + '_color6').css('background-color', color6);
			    $('#' + code + '_color7').css('background-color', color7);
			    $('#' + code + '_color8').css('background-color', color8);
			    $('#' + code + '_color9').css('background-color', color9);
		    }
		});
		</script>

		<!--JSON BY SEASONS-->
		<script>
			var sliceColor = [ ];

				var url="marvelcolors-data-json.txt";
			    var json = new Array();

			    $.getJSON(url,function(data){
					json = data;
			    }).done(function(){  

					sortJsonField();
			    });
			        function sortJsonField(field){
			            function sortJson(a,b){
			                if(field == "sat"){ 
								return a.sat > b.sat ? 1 : -1;
							}
							else if(field == "bri"){ 
								return a.bri > b.bri ? 1 : -1;
							}
							else { 
								return a.hue> b.hue ? 1 : -1;
							}
			            }
			            json.data.sort(sortJson);
			            showJSON();
			        };
			        //shower
			        function showJSON(){
			            $('#output1,#output2,#output3,#output4').empty();
			            $.each(json.data,function(i,row){ 
			                var classe = "";
			                if(row.seasons == "spring") classe = "spring";
			                else if(row.seasons == "summer") classe = "summer";
			                else if(row.seasons == "autumn") classe = "autumn";
			                else if(row.seasons == "winter") classe = "winter";

			                sliceColor[i] = '<li style="background-color:hsl(';
			                sliceColor[i] += row.hue + ',' + row.bri + '%,' + row.sat + '%);" class="slice"></li>';

			                if(classe == "spring") {
			                    $('#output1').append(sliceColor[i]);
			                    $("#output1 .slice").addClass("spring");
			                    $('.spring').css('height', 100/$('.spring').length + "%");
			                }
			                else if(classe == "summer") {
			                    $('#output2').append(sliceColor[i]);
			                     $("#output2 .slice").addClass("summer");
			                    $('.summer').css('height', 100/$('.summer').length + '%');
			                }
			                else if(classe == "autumn") {
			                    $('#output3').append(sliceColor[i]); 
			                    $("#output3 .slice").addClass("autumn");
			                    $('.autumn').css('height', 100/$('.autumn').length + '%');
			                }
			                else if(classe == "winter"){
			                    $('#output4').append(sliceColor[i]); 
			                    $("#output4 .slice").addClass("winter");
			                    $('.winter').css('height', 100/$('.winter').length + '%');
			                }
			            });

			        };
			        showJSON(); 
		</script>
<script>
var tablo_colors = {};
var sorted_tablo = {};
var couleurs = [];
var iCouleur = 0;

var tablo_colors2 = {};
var sorted_tablo2 = {};
var hexacouleurs = [];
var ihexaCouleur = 0;

function sortJsonName(a,b){
	return a.name_flatten_couleur1.toLowerCase() > b.name_flatten_couleur1.toLowerCase() ? 1 : -1;
	return a.name_flatten_couleur2.toLowerCase() > b.name_flatten_couleur2.toLowerCase() ? 1 : -1;
	return a.name_flatten_couleur3.toLowerCase() > b.name_flatten_couleur3.toLowerCase() ? 1 : -1;
	return a.name_flatten_couleur4.toLowerCase() > b.name_flatten_couleur4.toLowerCase() ? 1 : -1;
	return a.name_flatten_couleur5.toLowerCase() > b.name_flatten_couleur5.toLowerCase() ? 1 : -1;
};
function compareNombres(a, b) {
	return a - b;
}
function assocSort(oAssoc) {
    var idx;
    var key;
    var arVal = [];
    var arValKey = [];
    var oRes = {};
     
    for (key in oAssoc) {
        arVal[arVal.length] = oAssoc[key];
        arValKey[oAssoc[key]] = key;
    }
    arVal.sort(compareNombres);
    arVal.reverse();
    for (idx in arVal)
        oRes[arValKey[arVal[idx]]] = arVal[idx];
     
    return oRes;
}
	
		$.getJSON("datacolors.json", function(cats){
      		cats = $(cats).sort(sortJsonName);

      		$.each(cats, function(index, cat){      				
				if(tablo_colors[cat.name_flatten_couleur1])
					tablo_colors[cat.name_flatten_couleur1]++;
				else
					tablo_colors[cat.name_flatten_couleur1]=1;

				if(tablo_colors[cat.name_flatten_couleur2])
					tablo_colors[cat.name_flatten_couleur2]++;
				else
					tablo_colors[cat.name_flatten_couleur2]=1;
					
				if(tablo_colors[cat.name_flatten_couleur3])
					tablo_colors[cat.name_flatten_couleur3]++;
				else
					tablo_colors[cat.name_flatten_couleur3]=1;

				if(tablo_colors[cat.name_flatten_couleur4])
					tablo_colors[cat.name_flatten_couleur4]++;
				else
					tablo_colors[cat.name_flatten_couleur4]=1;	

				if(tablo_colors[cat.name_flatten_couleur5])
					tablo_colors[cat.name_flatten_couleur5]++;
				else
					tablo_colors[cat.name_flatten_couleur5]=1;				
			});
			sorted_tablo = assocSort(tablo_colors);
	        for(var couleur in sorted_tablo) {
	        	couleurs[iCouleur++] = couleur;
	        };

	        $.each(cats, function(index, cat){		
				if(tablo_colors2[cat.flatten_couleur1])
					tablo_colors2[cat.flatten_couleur1]++;
				else
					tablo_colors2[cat.flatten_couleur1]=1;

				if(tablo_colors2[cat.flatten_couleur2])
					tablo_colors2[cat.flatten_couleur2]++;
				else
					tablo_colors2[cat.flatten_couleur2]=1;
					
				if(tablo_colors2[cat.flatten_couleur3])
					tablo_colors2[cat.flatten_couleur3]++;
				else
					tablo_colors2[cat.flatten_couleur3]=1;

				if(tablo_colors2[cat.flatten_couleur4])
					tablo_colors2[cat.flatten_couleur4]++;
				else
					tablo_colors2[cat.flatten_couleur4]=1;	

				if(tablo_colors2[cat.flatten_couleur5])
					tablo_colors2[cat.flatten_couleur5]++;
				else
					tablo_colors2[cat.flatten_couleur5]=1;

				/*$('#test').append('<img class="'+cat.name_flatten_couleur1+' '+cat.name_flatten_couleur2+' '+cat.name_flatten_couleur3+ ' '+cat.name_flatten_couleur4+' '+ cat.name_flatten_couleur5+'" src="'+cat.route+'"/>');
				$('#test .black').css('opacity','1 !important');*/
			});
			sorted_tablo2 = assocSort(tablo_colors2);
	        for(var hexacouleur in sorted_tablo2) {
	        	hexacouleurs[ihexaCouleur++] = hexacouleur;
	        };
			$('.floor-4').css('background-color', couleurs[0]);
			$('.floor-4 h2').append(couleurs[0]);
			$('.floor-4 h3').append(hexacouleurs[0]);
			$('.floor-5').css('background-color', couleurs[1]);
			$('.floor-5 h2').append(couleurs[1]);
			$('.floor-5 h3').append(hexacouleurs[1]);
			$('.floor-6').css('background-color', couleurs[2]);
			$('.floor-6 h2').append(couleurs[2]);
			$('.floor-6 h3').append(hexacouleurs[2])
			$('.floor-7').css('background-color', couleurs[3]);
			$('.floor-7 h2').append(couleurs[3]);
			$('.floor-7 h3').append(hexacouleurs[3]);
			$('.floor-8').css('background-color', couleurs[4]);
			$('.floor-8 h2').append(couleurs[4]);
			$('.floor-8 h3').append(hexacouleurs[4]);
			$('.floor-9').css('background-color', couleurs[5]);
			$('.floor-9 h2').append(couleurs[5]);
			$('.floor-9 h3').append(hexacouleurs[5]);
			$('.floor-10').css('background-color', couleurs[6]);
			$('.floor-10 h2').append(couleurs[6]);
			$('.floor-10 h3').append(hexacouleurs[6]);
		});

</script>

	</body>
</html>